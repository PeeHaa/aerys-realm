!function(n){var i={};function r(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=n,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,n){"use strict";n(1);var i=o(n(2)),r=o(n(3)),s=o(n(4));function o(e){return e&&e.__esModule?e:{default:e}}var u=new i.default,a=new r.default(document.querySelector('[name="input"]'),document.querySelector(".log"),u,new s.default);u.connect(a.onIncomingMessage.bind(a))},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.connected=!1,this.socket=null,this.onMessage=null}return i(e,[{key:"connect",value:function(e){var t=this;this.socket=new WebSocket(this.getUrl()),this.socket.addEventListener("open",function(){t.connected=!0,t.send("connect")}),this.onMessage=e,this.socket.addEventListener("message",this.onMessage)}},{key:"send",value:function(e){this.connected&&this.socket.send(e)}},{key:"getUrl",value:function(){var e="ws://";return"https:"===location.protocol&&(e="wss://"),e+location.host+"/ws"}},{key:"reset",value:function(){this.socket.close(),this.connected=!1,this.connect(this.onMessage)}}]),e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var r=function(){function r(e,t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.input=e,this.log=t,this.connection=n,this.history=i,this.prefix="",this.input.addEventListener("keydown",this.sendMessageHandler.bind(this))}return i(r,[{key:"sendMessageHandler",value:function(e){if("ArrowUp"!==e.key)if("ArrowDown"!==e.key)"Enter"===e.key&&""!==this.input.value.trim()&&(this.history.push(this.input.value.trim()),this.connection.send(this.prefix+this.input.value.trim()),this.input.value="");else{var t=this.history.getNext();if(null===t)return;this.input.value=t}else{var n=this.history.getPrevious();if(null===n)return;this.input.value=n}}},{key:"onIncomingMessage",value:function(e){var t=JSON.parse(e.data);switch(t.type){case"render":return this.handleRenderMessage(t);case"command":return this.handleCommandMessage(t)}}},{key:"handleRenderMessage",value:function(e){this.log.insertAdjacentHTML("beforeend",e.html),this.prefix=e.prefix,this.log.scrollTop=this.log.scrollHeight,this.input.setAttribute("type",e.inputType)}},{key:"handleCommandMessage",value:function(e){if("clear"===e.command||"reset"===e.command){for(;this.log.firstChild;)this.log.removeChild(this.log.firstChild);this.history.reset()}"reset"===e.command&&(this.connection.reset(),this.history.reset(),this.handleRenderMessage({html:"<pre>This account logged in from another session. Logging you out here.</pre>",inputType:"text",prefix:"",type:"render"}))}}]),r}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.reset()}return i(e,[{key:"reset",value:function(){this.entries=[],this.index=0}},{key:"push",value:function(e){this.entries.push(e),this.index=0}},{key:"getPrevious",value:function(){return this.index++,this.entries.length-this.index<0?(this.index--,null):this.entries[this.entries.length-this.index]}},{key:"getNext",value:function(){return this.index--,this.index<1?"":this.index<0?(this.index++,null):this.entries[this.entries.length-this.index]}}]),e}();t.default=r}]);